jQuery(document).ready(function(i){function e(){t=i('[name="fca_eoi[mailchimp_list_id]"]'),fca_eoi_provider_status_set("mailchimp-groups",fca_eoi_provider_status_codes.loading);var e={action:"mailchimp_get_groups",api_key:_.val().trim(),list_id:t.find(":selected").val()};i.post(ajaxurl,e,function(e){var a=JSON.parse(e);fca_eoi_provider_status_set("mailchimp-groups","");var _=i('<select class="select2 mailchimp_group_select" style="width: 27em;" multiple="multiple" placeholder="Select Interest Groups Here" name="fca_eoi[mailchimp_groups][]" >');for(group_id in a)_.append('<option value="'+group_id+'">'+a[group_id]+"</option>");i('[name="fca_eoi[mailchimp_groups][]"]').select2("destroy"),i('[name="fca_eoi[mailchimp_groups][]"]').replaceWith(_),i('[name="fca_eoi[mailchimp_groups][]"]').select2()})}function a(){var e=i("option",'[name="fca_eoi[mailchimp_list_id]"]');e.length>1?i().add(l).add(c).add(p).show("fast"):i().add(l).add(c).add(p).hide()}var _=i('[name="fca_eoi[mailchimp_api_key]"]'),t=i('[name="fca_eoi[mailchimp_list_id]"]'),o=i('[name="fca_eoi[mailchimp_groups][]"]'),c=i("#mailchimp_list_id_wrapper"),p=i("#mailchimp_group_wrapper"),s="on"==fcaEoiUseGroups?!0:!1,l=i("#mailchimp_double_opt_in_wrapper");a(),fca_eoi_provider_status_setup("mailchimp",_),fca_eoi_provider_status_setup("mailchimp-groups",o),t.change(function(){s?e():""}),""!==_.val()&&"Not set"!==t.find(":selected").val()&&0==i('[name="fca_eoi[mailchimp_list_id]"] option').size()&&(s?e():""),_.bind("input",function(){if(fca_eoi_provider_is_value_changed(i(this))){fca_eoi_provider_status_set("mailchimp",fca_eoi_provider_status_codes.loading);var t={action:"fca_eoi_mailchimp_get_lists",mailchimp_api_key:_.val().trim()};i.post(ajaxurl,t,function(_){var t=JSON.parse(_);fca_eoi_provider_status_set("mailchimp",Object.keys(t).length>1?fca_eoi_provider_status_codes.ok:fca_eoi_provider_status_codes.error);var o=i('<select class="select2" style="width: 27em;" name="fca_eoi[mailchimp_list_id]" >');for(list_id in t)o.append('<option value="'+list_id+'">'+t[list_id]+"</option>");i("option:eq(1)",o).prop("selected",!0),i('[name="fca_eoi[mailchimp_list_id]"]').select2("destroy"),i('[name="fca_eoi[mailchimp_list_id]"]').replaceWith(o),i('[name="fca_eoi[mailchimp_list_id]"]').select2(),a(),o.change(function(){s?e():""}),s?e():""})}}),i('select[name="fca_eoi[mailchimp_double_opt_in]"]').select2().on("change",function(){i('input[name="fca_eoi[is_send_opt_int_bait]"]').prop("checked",!1)}),i('input[name="fca_eoi[is_send_opt_int_bait]"]').on("click",function(){i('input[name="fca_eoi[is_send_opt_int_bait]"]').is(":checked")?i('select[name="fca_eoi[mailchimp_double_opt_in]"]').select2("val","false"):i('select[name="fca_eoi[mailchimp_double_opt_in]"]').select2("val","true")})});